<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Siempre Ganas ‚Äî Elige tus n√∫meros y entra a la ruleta</title>

  <link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/participant.css">
</head>
<body>
  <div class="main-container">

    <!-- HEADER CON ENFOQUE EMOCIONAL + SEGURIDAD -->
    <header class="dashboard-header">
      <div>
        <h2 id="tituloSorteo">Cargando sorteo...</h2>
        <p id="subtituloSorteo" class="text-muted">
          Est√°s a unos pasos de asegurar tus n√∫meros y tu lugar en la ruleta üé∞
        </p>

        <!-- micro-bloque de confianza -->
        <div class="confianza-strip">
          ‚úÖ N√∫meros reservados al enviar tu comprobante &nbsp;‚Ä¢&nbsp;
          üîí Proceso validado por administradores &nbsp;‚Ä¢&nbsp;
          üéÅ Siempre recibes un producto digital
        </div>

      </div>
      <div>
        <button
          type="button"
          class="btn btn-secondary"
          onclick="location.href='dashboard.html'">
          ‚¨Ö Ver otros sorteos
        </button>
        <button
          type="button"
          class="btn btn-secondary"
          onclick="location.href='mis-numeros.html'">
          üéü Mis n√∫meros
        </button>
        <button
          type="button"
          class="btn btn-danger"
          onclick="logout()">
          Salir
        </button>
      </div>
    </header>

    <!-- LAYOUT DOS COLUMNAS -->
    <section class="sorteo-detalle-layout">
      <!-- Columna izquierda: info general del sorteo -->
      <div class="sorteo-detalle-main">
        <h2 id="tituloPremio">Premio</h2>

        <!-- Mensaje persuasivo corto -->
        <p class="section-description">
          Este sorteo te da acceso a un <strong>producto digital real</strong> y a una
          <strong>oportunidad extra</strong> en la ruleta Siempre Ganas. No es solo suerte:
          cada n√∫mero que eliges te devuelve valor.
        </p>

        <div class="sorteo-data">
          <p>
            üéÅ <strong>Premio principal:</strong>
            <span id="textoPremio">‚Äî</span>
          </p>
          <p>
            üí∏ <strong>Precio por n√∫mero:</strong>
            <span id="textoPrecio">‚Äî</span>
          </p>
          <p>
            üî¢ <strong>Cantidad total de n√∫meros:</strong>
            <span id="textoCantidad">‚Äî</span>
          </p>
        </div>

        <!-- M√©todo de pago destacado (en acorde√≥n) -->
        <details class="info-accordion" open>
          <summary>
            <span>üí≥ Paga tus n√∫meros por Nequi</span>
            <span class="pago-nequi-badge">Paso 1</span>
          </summary>

          <div class="pago-nequi-card" style="margin-top:.6rem;">
            <div class="pago-nequi-header">
              <div>
                <p class="pago-nequi-subtitle" style="margin:0;">
                  Asegura tu lugar en la ruleta en menos de 1 minuto ‚ö°
                </p>
              </div>
            </div>

            <div class="pago-nequi-main">
              <!-- Datos Nequi -->
              <div class="pago-nequi-datos">
                <p class="pago-nequi-label">N√∫mero Nequi</p>
                <p class="pago-nequi-value pago-nequi-value--big">3045538465</p>

                <p class="pago-nequi-label">Titular</p>
                <p class="pago-nequi-value">Jen** Por***</p>

                <button
                  type="button"
                  class="btn btn-primary btn-nequi-copy"
                  onclick="copiarNequi()"
                >
                  üìã Copiar n√∫mero de Nequi
                </button>
              </div>

              <!-- Pasos -->
              <div class="pago-nequi-steps">
                <ol>
                  <li>Elige tus n√∫meros y mira el total a pagar.</li>
                  <li>Env√≠a el pago a Nequi con la nota <strong>‚ÄúSorteo + tu nombre‚Äù</strong>.</li>
                  <li>Haz una captura clara del comprobante y s√∫belo en esta p√°gina.</li>
                </ol>
                <p class="pago-nequi-seguro">
                  üõ°Ô∏è Tu pago es revisado manualmente para mantener el sorteo
                  <strong>100% transparente</strong>.
                </p>
              </div>
            </div>

            <div class="pago-nequi-footer">
              üí° Tip: si te gustan ciertos n√∫meros, p√°galos apenas los elijas para que nadie m√°s los tome.
            </div>
          </div>
        </details>




        <!-- Progreso de ocupaci√≥n (urgencia visual) -->
        <div class="progress-wrapper">
          <div class="progress-container">
            <div id="progressFill" class="progress-bar"></div>
          </div>
          <p class="progress-text" id="textoProgreso">
            Cargando ocupaci√≥n...
          </p>
          <p class="text-muted progress-tip-text">
            Tip: los mejores n√∫meros se van r√°pido. Si te gusta uno, res√©rvalo antes de que se ocupe.
          </p>

        </div>

        <!-- Secci√≥n educativa + persuasiva -->
        <div class="sorteo-steps">

        <!-- Acorde√≥n 1: pasos -->
        <details class="info-accordion" >
          <summary>C√≥mo asegurar tus n√∫meros en 4 pasos</summary>
          <ol>
            <li><strong>Explora la cuadr√≠cula</strong> y toca tus n√∫meros favoritos.</li>
            <li><strong>Revisa el resumen</strong> para ver cu√°ntos n√∫meros llevas y el total a pagar.</li>
            <li><strong>Realiza el pago</strong> por el valor total y toma una captura clara del comprobante.</li>
            <li>
              <strong>Sube tu comprobante y confirma</strong>: tus n√∫meros quedar√°n reservados como
              <strong>pendientes</strong> hasta ser validados por un administrador.
            </li>
          </ol>
        </details>

        <!-- Acorde√≥n 2: por qu√© gusta el formato -->
        <details class="info-accordion">
          <summary>¬øPor qu√© a la gente le gusta este formato?</summary>
          <ul>
            <li>
              <strong>Doble beneficio:</strong> siempre recibes un producto digital, ganes o no en la ruleta.
            </li>
            <li>
              <strong>Emoci√≥n controlada:</strong> ves en tiempo real cu√°ntos n√∫meros quedan y tu probabilidad
              mejora al comprar m√°s.
            </li>
            <li>
              <strong>Transparencia total:</strong> todos los n√∫meros ocupados se muestran y la ruleta se hace
              cuando el sorteo se llena.
            </li>
          </ul>
        </details>

      </div>



      <!-- Columna derecha: selecci√≥n de n√∫meros + comprobante -->
      <aside class="sorteo-detalle-side">
        <!-- Tarjeta de selecci√≥n de n√∫meros -->
        <div class="sorteo-numeros-card">
          <div class="sorteo-numeros-header">
            <h3>Elige tus n√∫meros</h3>
            <p class="text-muted">
              Toca para seleccionar. M√°ximo <span id="maxNumerosTexto">5</span> por compra.  
              Puedes volver luego por m√°s si quieres aumentar tus chances.
            </p>
          </div>
          <div id="gridNumeros" class="numeros-grid">
            <!-- N√∫meros generados por JS -->
          </div>
        </div>

        <!-- Tarjeta de resumen de compra + comprobante -->
        <div class="sorteo-compra-card" style="margin-top:14px;">
          <h3>Resumen de tu compra</h3>
          <p class="resumen-linea">
            <strong>N√∫meros seleccionados:</strong>
            <span id="resumenNumeros">Ninguno todav√≠a</span>
          </p>
          <p class="resumen-linea">
            <strong>Total a pagar:</strong>
            <span id="resumenTotal">$0</span>
          </p>
          <p class="text-muted help-text">
            Elige primero los n√∫meros que m√°s te gusten. No se enviar√° nada hasta que subas tu comprobante.
          </p>


          <div class="comprobante-upload">
            <label for="inputComprobante">üì∑ Sube tu comprobante de pago</label>
            <p class="text-muted">
              Aseg√∫rate de que se vea <strong>monto, fecha y referencia</strong>.  
              Esto ayuda a que tu participaci√≥n sea aprobada m√°s r√°pido.
            </p>
            <input type="file" id="inputComprobante" accept="image/*" />
            <div id="previewComprobante" class="comprobante-preview oculto">
              <p class="comprobante-preview-title">Vista previa del comprobante:</p>
              <img id="imgPreview" alt="Comprobante" />
            </div>
          </div>

          <button
            id="btnConfirmar"
            class="btn btn-primary btn-full-width">
            Confirmar participaci√≥n
          </button>


          <p class="text-muted help-text">
            Al confirmar, tus n√∫meros quedan en estado
            <strong>pendiente de validaci√≥n</strong>.  
            Cuando un administrador apruebe tu comprobante, tu participaci√≥n quedar√° <strong>activa</strong>.
          </p>

          <p class="text-muted footnote-text">
            Si el sorteo se llena mientras est√°s aqu√≠, tus n√∫meros siguen respetados siempre que hayas enviado
            el comprobante correctamente.
          </p>

        </div>
      </aside>
    </section>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden">Mensaje</div>

  <!-- Scripts -->
  <script src="../assets/js/config.js"></script>
  <script src="../assets/js/auth.js"></script>
  <script type="module" src="../assets/js/participante/sorteo-detalle.js"></script>
</body>
</html>
