<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Siempre Ganas â€” Elige tus nÃºmeros y entra a la ruleta</title>

  <link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/participant.css">
</head>
<body>
  <div class="main-container">

    <!-- HEADER: emociÃ³n + confianza -->
    <header class="dashboard-header">
      <div>
        <h2 id="tituloSorteo">Cargando sorteo...</h2>
        <p id="subtituloSorteo" class="text-muted">
          EstÃ¡s a unos pasos de asegurar tus nÃºmeros y tu lugar en la ruleta ğŸ°
        </p>

        <div class="confianza-strip">
          âœ… NÃºmeros reservados al enviar tu comprobante &nbsp;â€¢&nbsp;
          ğŸ”’ ValidaciÃ³n manual por administradores &nbsp;â€¢&nbsp;
          ğŸ Siempre recibes un producto digital
        </div>
      </div>

      <div>
        <button type="button" class="btn btn-secondary" onclick="location.href='dashboard.html'">
          â¬… Ver otros sorteos
        </button>
        <button type="button" class="btn btn-secondary" onclick="location.href='mis-numeros.html'">
          ğŸŸ Mis nÃºmeros
        </button>
        <button type="button" class="btn btn-danger" onclick="logout()">
          Salir
        </button>
      </div>
    </header>

    <!-- LAYOUT DOS COLUMNAS -->
    <section class="sorteo-detalle-layout">

      <!-- IZQUIERDA: contexto + pago + progreso -->
      <div class="sorteo-detalle-main">
        <h2 id="tituloPremio">Premio</h2>

        <p class="text-muted micro-lead">
          âœ… Incluye producto digital + entrada a la ruleta
        </p>


        <div class="sorteo-data">
          <p>ğŸ <strong>Premio principal:</strong> <span id="textoPremio">â€”</span></p>
          <p>ğŸ’¸ <strong>Precio por nÃºmero:</strong> <span id="textoPrecio">â€”</span></p>
          <p>ğŸ”¢ <strong>Cantidad total de nÃºmeros:</strong> <span id="textoCantidad">â€”</span></p>
        </div>

        <!-- PASO 1: PAGO (abierto) -->
        <details class="info-accordion">
          <summary>
            <span>ğŸ’³ Paso 1 Â· Paga por Nequi</span>
            <span class="pago-nequi-badge">1</span>
          </summary>

          <div class="pago-nequi-card" style="margin-top:.6rem;">
            <div class="pago-nequi-header">
              <div>
                <p class="pago-nequi-title" style="margin:0;">Paga tus nÃºmeros por Nequi</p>
                <p class="pago-nequi-subtitle" style="margin:.2rem 0 0;">
                  Asegura tu lugar en la ruleta en menos de 1 minuto âš¡
                </p>
              </div>
            </div>

            <div class="pago-nequi-main">
              <div class="pago-nequi-datos">
                <p class="pago-nequi-label">NÃºmero Nequi</p>
                <p class="pago-nequi-value pago-nequi-value--big">3045538465</p>

                <p class="pago-nequi-label">Titular</p>
                <p class="pago-nequi-value">Jen** Por***</p>

                <button type="button" class="btn btn-primary btn-nequi-copy" onclick="copiarNequi()">
                  ğŸ“‹ Copiar nÃºmero de Nequi
                </button>
              </div>

              <div class="pago-nequi-steps">
                <ol>
                  <li>Elige tus nÃºmeros y mira el total a pagar.</li>
                  <li>EnvÃ­a el pago con la nota <strong>â€œSorteo + tu nombreâ€</strong>.</li>
                  <li>Haz captura clara del comprobante y sÃºbelo aquÃ­.</li>
                </ol>
                <p class="pago-nequi-seguro">
                  ğŸ›¡ï¸ RevisiÃ³n manual para mantener el sorteo <strong>100% transparente</strong>.
                </p>
              </div>
            </div>

            <div class="pago-nequi-footer">
              ğŸ’¡ Tip: si te gustan ciertos nÃºmeros, pÃ¡galos apenas los elijas para que nadie mÃ¡s los tome.
            </div>
          </div>
        </details>

        <!-- PROGRESO (urgencia suave) -->
        <div class="progress-wrapper">
          <div class="progress-container">
            <div id="progressFill" class="progress-bar"></div>
          </div>
          <p class="progress-text" id="textoProgreso">Cargando ocupaciÃ³n...</p>
          <p class="text-muted progress-tip-text">
            Tip: los mejores nÃºmeros se van rÃ¡pido. Si te gusta uno, resÃ©rvalo antes de que se ocupe.
          </p>
        </div>

        <!-- EDUCACIÃ“N (cerrado, para no saturar) -->
        <div class="sorteo-steps">
          <details class="info-accordion">
            <summary>âœ… CÃ³mo asegurar tus nÃºmeros en 4 pasos</summary>
            <ol>
              <li><strong>Explora la cuadricula</strong> y toca tus nÃºmeros favoritos.</li>
              <li><strong>Revisa el resumen</strong> para ver el total.</li>
              <li><strong>Realiza el pago</strong> y toma captura clara del comprobante.</li>
              <li><strong>Sube y confirma</strong>: quedan <strong>pendientes</strong> hasta validaciÃ³n.</li>
            </ol>
          </details>

          <details class="info-accordion">
            <summary>âœ¨ Â¿Por quÃ© a la gente le gusta este formato?</summary>
            <ul>
              <li><strong>Doble beneficio:</strong> recibes un producto digital, ganes o no.</li>
              <li><strong>EmociÃ³n controlada:</strong> ves avance y decides con calma.</li>
              <li><strong>Transparencia:</strong> nÃºmeros ocupados visibles + ruleta al llenarse.</li>
            </ul>
          </details>
        </div>
      </div>

      <!-- DERECHA: selecciÃ³n + comprobante + confirmaciÃ³n -->
      <aside class="sorteo-detalle-side">

        <!-- Mis nÃºmeros en este sorteo -->
        <div id="misNumerosEnSorteoCard" class="sorteo-numeros-card" style="margin-bottom:14px; display:none;">
          <div class="sorteo-numeros-header">
            <h3>ğŸŸ Mis nÃºmeros en este sorteo</h3>
            <p class="text-muted microhint" id="misNumerosEnSorteoTexto">Cargando...</p>
          </div>

          <div id="misNumerosEnSorteoChips" class="numeros-chips-wrap"></div>
        </div>

        <!-- SelecciÃ³n -->
        <div class="sorteo-numeros-card">
          <div class="sorteo-numeros-header">
            <h3>Elige tus nÃºmeros</h3>

            <!-- microcopy corto (no cansa) -->
            <p class="text-muted microhint">
              MÃ¡x. <strong><span id="maxNumerosTexto">5</span></strong> por compra
            </p>
          </div>

          <div id="gridNumeros" class="numeros-grid"></div>

          <!-- resumen compacto (sin pÃ¡rrafos) -->
          <div class="mini-resumen-compra">
            <div class="mini-resumen-row">
              <span class="mini-label">SelecciÃ³n</span>
              <strong id="resumenNumeros">Ninguno todavÃ­a</strong>
            </div>

            <div class="mini-resumen-row">
              <span class="mini-label">Total</span>
              <strong id="resumenTotal">$0</strong>
            </div>
          </div>
        </div>

        <!-- ConfirmaciÃ³n -->
        <details class="info-accordion" open style="margin-top:14px;">
          <summary>
            <span>ğŸ§¾ Subir comprobante</span>
            <span class="pago-nequi-badge">2</span>
          </summary>

          <div class="sorteo-compra-card" style="margin-top:10px;">

            <div class="comprobante-upload">
              <label for="inputComprobante">Comprobante de pago</label>
              <p class="text-muted microhint">
                Que se vea <strong>monto</strong> y <strong>referencia</strong>.
              </p>

              <input type="file" id="inputComprobante" accept="image/*" />

              <div id="previewComprobante" class="comprobante-preview oculto">
                <p class="comprobante-preview-title">Vista previa:</p>
                <img id="imgPreview" alt="Comprobante" />
              </div>
            </div>

            <button id="btnConfirmar" class="btn btn-primary btn-full-width">
              Confirmar participaciÃ³n
            </button>

            <!-- ayuda plegable para no saturar -->
            <details class="mini-ayuda">
              <summary>Â¿QuÃ© pasa despuÃ©s?</summary>
              <p class="text-muted">
                Tus nÃºmeros quedan <strong>pendientes</strong> hasta revisiÃ³n. Al aprobar, quedan <strong>activos</strong>.
              </p>
            </details>

          </div>
        </details>

      </aside>

    </section>
  </div>

  <div id="toast" class="toast hidden">Mensaje</div>

  <script src="../assets/js/config.js"></script>
  <script src="../assets/js/auth.js"></script>
  <script type="module" src="../assets/js/participante/sorteo-detalle.js"></script>
</body>
</html>
